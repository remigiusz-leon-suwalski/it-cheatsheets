%

\section{Manage images}
\subsection{Pulling images}
\begin{bashcode}
$ docker pull busybox
# The same as 'docker image pull ...'
# Downloads an image from a registry
\end{bashcode}

\subsection{Listing images}
\begin{bashcode}
$ docker images
# The same as 'docker image ls'
# Lists images (skipping intermediate ones)
REPOSITORY  TAG    IMAGE ID     CREATED      SIZE
busybox     latest c55b0f125dc6 13 days ago  1.24MB
ubuntu      latest 7e0aa2d69a15 3 weeks ago  72.7MB
hello-world latest d1165f221234 2 months ago 13.3kB

$ docker images -a
# including intermediate images
$ docker images --digests
# including SHA256 digests
$ docker images --dilter='...'
# TODO
\end{bashcode}

\subsection{Removing images}
\begin{bashcode}
$ docker rmi IMAGE
# The same as 'docker image rm ...'
# Removes images unless some container is using them
$ docker image prune
# The same as `docker image rm $(docker images -qf dangling=true)`
# Removes dangling images (without a repository name / a tag)
$ docker image prune -a
# -a == --all removes all unused images instead
\end{bashcode}

\subsection{Work in progress}
{
\color{red}
\important{Push a local image} to a registry:
\begin{bashcode}
$ docker image push NAME[:TAG]
\end{bashcode}

Useful switches:
\begin{compactitem}
    \item \mintinline{bash}{--all-tags}: pushes all tagged images in the repository.
\end{compactitem}

Example.
To push a new image to a registry, first save the new image by finding the container ID (using \mintinline{bash}{docker container ls}) and then committing it to a new image name.
Now, push the image to the registry using the image ID. 
\begin{bashcode}
$ docker container commit c16378f943fe rhel-httpd:latest
$ docker image tag rhel-httpd:latest \
>     registry-host:5000/myadmin/rhel-httpd:latest
$ docker image push registry-host:5000/myadmin/rhel-httpd:latest
\end{bashcode}
}

%